import{a as f,p as Ce}from"./chunk-TMI4QPZX-ByyJG4wn.js";import{j as C}from"./jsx-runtime-C2tkE_r8.js";import{b as B,g as he,S as V,a as N,l as Te,f as Y}from"./cookies-utils-DqiKtheR.js";const Ie="modulepreload",ke=function(e){return"/"+e},J={},Se=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));a=o(r.map(c=>{if(c=ke(c),c in J)return;J[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Ie,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((h,y)=>{p.addEventListener("load",h),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})},v={PAGE_VIEW:"PAGE_VIEW",ADD_TO_CART:"ADD_TO_CART",PAGE_VIEW_2:"PAGE_VIEW_2",COLLECTION_VIEW:"COLLECTION_VIEW",PRODUCT_VIEW:"PRODUCT_VIEW",SEARCH_VIEW:"SEARCH_VIEW"},k={collection:"collection",product:"product",search:"search"},be={headless:"headless"},Q={hydrogen:"6167201",headless:"12875497473"};function w(e,t){return{schema_id:e,payload:t,metadata:{event_created_at_ms:Date.now()}}}function m(e){const t={id:"",resource:null,resourceId:null,search:"",searchParams:new URLSearchParams,hash:""};if(typeof e!="string")return t;try{const{search:r,searchParams:n,pathname:a,hash:i}=new URL(e),o=a.split("/"),s=o[o.length-1],l=o[o.length-2];return!s||!l?t:{id:`${s}${r}${i}`||"",resource:l??null,resourceId:s||null,search:r,searchParams:n,hash:i}}catch{return t}}function g(e,t){return typeof e!="object"?{}:(Object.entries(e).forEach(([r,n])=>{n&&(t[r]=n)}),t)}function De(e){return typeof document>"u"?(console.error(`${e} should only be used within the useEffect callback or event handlers`),!0):!1}const Le="trekkie_storefront_page_view/1.4",Oe="myshopify.dev";function z(e){const t=e,{id:r,resource:n}=m(t.resourceId),a=n?n.toLowerCase():void 0;return[w(Le,g({pageType:t.pageType,customerId:parseInt(m(t.customerId).id||"0"),resourceType:a,resourceId:parseInt(r)},Re(t)))]}function Re(e){return{appClientId:e.shopifySalesChannel?Q[e.shopifySalesChannel]:Q.headless,isMerchantRequest:Ve(e.url),hydrogenSubchannelId:e.storefrontId||e.hydrogenSubchannelId||"0",isPersistentCookie:e.hasUserConsent,uniqToken:e.uniqueToken,visitToken:e.visitToken,microSessionId:B(),microSessionCount:1,url:e.url,path:e.path,search:e.search,referrer:e.referrer,title:e.title,shopId:parseInt(m(e.shopId).id),currency:e.currency,contentLanguage:e.acceptedLanguage||"en"}}function Ve(e){if(typeof e!="string")return!1;const t=new URL(e).hostname;return t.indexOf(Oe)!==-1||t==="localhost"}const Ne="2025.7.0",P="custom_storefront_customer_tracking/1.2",ye="page_rendered",me="collection_page_rendered",ve="product_page_rendered",We="product_added_to_cart",ge="search_submitted";function b(e){return{canonical_url:e.canonicalUrl||e.url,customer_id:parseInt(m(e.customerId).id||"0")}}function je(e){const t=e,r=b(t),n=t.pageType,a=[];switch(a.push(w(P,g({event_name:ye,...r},A(t)))),n){case k.collection:a.push(w(P,g({event_name:me,...r,collection_name:t.collectionHandle,collection_id:parseInt(m(t.collectionId).id)},A(t))));break;case k.product:a.push(w(P,g({event_name:ve,...r,products:H(t.products),total_value:t.totalValue},A(t))));break;case k.search:a.push(w(P,g({event_name:ge,...r,search_string:t.searchString},A(t))));break}return a}function Be(e){const t=e,r=b(t);return[w(P,g({event_name:ye,...r},A(t)))]}function Ue(e){const t=e,r=b(t);return[w(P,g({event_name:me,...r,collection_name:t.collectionHandle,collection_id:parseInt(m(t.collectionId).id)},A(t)))]}function $e(e){const t=e,r=b(t);return[w(P,g({event_name:ve,...r,products:H(t.products),total_value:t.totalValue},A(t)))]}function qe(e){const t=e,r=b(t);return[w(P,g({event_name:ge,...r,search_string:t.searchString},A(t)))]}function Ge(e){const t=e,r=m(t.cartId);return[w(P,g({event_name:We,customerId:t.customerId,cart_token:r!=null&&r.id?`${r.id}`:null,total_value:t.totalValue,products:H(t.products),customer_id:parseInt(m(t.customerId).id||"0")},A(t)))]}function A(e){return{source:e.shopifySalesChannel||be.headless,asset_version_id:e.assetVersionId||Ne,hydrogenSubchannelId:e.storefrontId||e.hydrogenSubchannelId||"0",is_persistent_cookie:e.hasUserConsent,deprecated_visit_token:e.visitToken,unique_token:e.uniqueToken,event_time:Date.now(),event_id:B(),event_source_url:e.url,referrer:e.referrer,user_agent:e.userAgent,navigation_type:e.navigationType,navigation_api:e.navigationApi,shop_id:parseInt(m(e.shopId).id),currency:e.currency,ccpa_enforced:e.ccpaEnforced||!1,gdpr_enforced:e.gdprEnforced||!1,gdpr_enforced_as_string:e.gdprEnforced?"true":"false",analytics_allowed:e.analyticsAllowed||!1,marketing_allowed:e.marketingAllowed||!1,sale_of_data_allowed:e.saleOfDataAllowed||!1}}function H(e){return e?e.map(t=>{const r=g({variant_gid:t.variantGid,category:t.category,sku:t.sku,product_id:parseInt(m(t.productGid).id),variant_id:parseInt(m(t.variantGid).id)},{product_gid:t.productGid,name:t.name,variant:t.variantName||"",brand:t.brand,price:parseFloat(t.price),quantity:Number(t.quantity||0)});return JSON.stringify(r)}):[]}function D(e,t){const{eventName:r,payload:n}=e;if(!n.hasUserConsent)return Promise.resolve();let a=[];const i=n;return r===v.PAGE_VIEW?a=a.concat(z(i),je(i)):r===v.ADD_TO_CART?a=a.concat(Ge(n)):r===v.PAGE_VIEW_2?a=a.concat(z(i),Be(i)):r===v.COLLECTION_VIEW?a=a.concat(Ue(i)):r===v.PRODUCT_VIEW?a=a.concat($e(i)):r===v.SEARCH_VIEW&&(a=a.concat(qe(i))),a.length?Me(a,t):Promise.resolve()}function xe(){return typeof window>"u"||!window.navigator?!1:/Chrome-Lighthouse/.test(window.navigator.userAgent)}const X="sendShopifyAnalytics request is unsuccessful";function Me(e,t){if(xe())return Promise.resolve();const r={events:e,metadata:{event_sent_at_ms:Date.now()}};try{return fetch(t?`https://${t}/.well-known/shopify/monorail/unstable/produce_batch`:"https://monorail-edge.shopifysvc.com/unstable/produce_batch",{method:"post",headers:{"content-type":"text/plain"},body:JSON.stringify(r)}).then(n=>{if(!n.ok)throw new Error("Response failed");return n.text()}).then(n=>{n&&JSON.parse(n).result.forEach(i=>{i.status!==200&&console.error(X,`

`,i.message)})}).catch(n=>{console.error(X,n)})}catch{return Promise.resolve()}}function He(){if(De("getClientBrowserParameters"))return{uniqueToken:"",visitToken:"",url:"",path:"",search:"",referrer:"",title:"",userAgent:"",navigationType:"",navigationApi:""};const[e,t]=Ye(),r=he(document.cookie);return{uniqueToken:r[N],visitToken:r[V],url:location.href,path:location.pathname,search:location.search,referrer:document.referrer,title:document.title,userAgent:navigator.userAgent,navigationType:e,navigationApi:t}}function Ke(){try{const e=(performance==null?void 0:performance.getEntriesByType)&&(performance==null?void 0:performance.getEntriesByType("navigation"));if(e&&e[0]){const t=window.performance.getEntriesByType("navigation")[0].type;return t&&t.toString()}}catch{}}function Fe(){var e,t;try{if(PerformanceNavigation&&((e=performance==null?void 0:performance.navigation)==null?void 0:e.type)!==null&&((t=performance==null?void 0:performance.navigation)==null?void 0:t.type)!==void 0){const r=performance.navigation.type;switch(r){case PerformanceNavigation.TYPE_NAVIGATE:return"navigate";case PerformanceNavigation.TYPE_RELOAD:return"reload";case PerformanceNavigation.TYPE_BACK_FORWARD:return"back_forward";default:return`unknown: ${r}`}}}catch{}}function Ye(){try{let e="PerformanceNavigationTiming",t=Ke();return t||(t=Fe(),e="performance.navigation"),t?[t,e]:["unknown","unknown"]}catch{}return["error","error"]}const Z={};function Je(e,t){const r=Z[e];if(r)return r;const n=new Promise((a,i)=>{const o=document.createElement("script");t!=null&&t.module?o.type="module":o.type="text/javascript",o.src=e,o.onload=()=>{a(!0)},o.onerror=()=>{i(!1)},(t==null?void 0:t.in)==="head"?document.head.appendChild(o):document.body.appendChild(o);const s=t==null?void 0:t.attributes;s&&Object.keys(s).forEach(l=>{o.setAttribute(l,s[l])})});return Z[e]=n,n}function K(e,t){const[r,n]=f.useState("loading");return f.useEffect(()=>{Je(e,t).then(()=>n("done")).catch(()=>n("error"))},[e]),r}const Qe=60*60*24*360*1,ze=60*30;function Xe(e){const{hasUserConsent:t=!1,domain:r="",checkoutDomain:n=""}=e||{};f.useEffect(()=>{const a=he(document.cookie);let i=r||window.document.location.host;if(n){const s=n.split(".").reverse(),l=i.split(".").reverse(),c=[];s.forEach((u,d)=>{u===l[d]&&c.push(u)}),i=c.reverse().join(".")}/^localhost/.test(i)&&(i="");const o=i?/^\./.test(i)?i:`.${i}`:"";t?(O(N,a[N]||B(),Qe,o),O(V,a[V]||B(),ze,o)):(O(N,"",0,o),O(V,"",0,o))},[e,t,r,n])}function O(e,t,r,n){document.cookie=Te(e,t,{maxage:r,domain:n,samesite:"Lax",path:"/"})}function Ze(e){let{type:t,data:r={},customData:n}=e,a=Ce(),{publish:i,cart:o,prevCart:s,shop:l,customData:c}=$(),u=a.pathname+a.search,d={...r,customData:{...c,...n},cart:o,prevCart:s,shop:l};return f.useEffect(()=>{l!=null&&l.shopId&&(d={...d,url:window.location.href},i(t,d))},[i,u,l==null?void 0:l.shopId]),null}function et(e){return C.jsx(Ze,{...e,type:"page_viewed"})}var E={PAGE_VIEWED:"page_viewed",PRODUCT_VIEWED:"product_viewed",COLLECTION_VIEWED:"collection_viewed",CART_VIEWED:"cart_viewed",SEARCH_VIEWED:"search_viewed",PRODUCT_ADD_TO_CART:"product_added_to_cart"},tt="https://cdn.shopify.com/shopifycloud/consent-tracking-api/v0.1/consent-tracking-api.js",rt="https://cdn.shopify.com/shopifycloud/privacy-banner/storefront-banner.js";function G(e){console.error(`[h2:error:useCustomerPrivacy] Unable to setup Customer Privacy API: Missing consent.${e} configuration.`)}function nt(e){let{withPrivacyBanner:t=!1,onVisitorConsentCollected:r,onReady:n,...a}=e;K(t?rt:tt,{attributes:{id:"customer-privacy-api"}});let{observing:i,setLoaded:o}=ot({withPrivacyBanner:t,onLoaded:n}),s=f.useMemo(()=>{let{checkoutDomain:c,storefrontAccessToken:u}=a;return c||G("checkoutDomain"),u||G("storefrontAccessToken"),(u.startsWith("shpat_")||u.length!==32)&&console.error("[h2:error:useCustomerPrivacy] It looks like you passed a private access token, make sure to use the public token"),{checkoutRootDomain:c,storefrontAccessToken:u,storefrontRootDomain:re(c),country:a.country,locale:a.locale}},[a,re,G]);f.useEffect(()=>{let c=u=>{r&&r(u.detail)};return document.addEventListener("visitorConsentCollected",c),()=>{document.removeEventListener("visitorConsentCollected",c)}},[r]),f.useEffect(()=>{if(!t||i.current.privacyBanner)return;i.current.privacyBanner=!0;let c=window.privacyBanner||void 0;Object.defineProperty(window,"privacyBanner",{configurable:!0,get(){return c},set(u){if(typeof u=="object"&&u!==null&&"showPreferences"in u&&"loadBanner"in u){let d=u;d.loadBanner(s),c=oe({privacyBanner:d,config:s}),o.privacyBanner(),te()}}})},[t,s,oe,o.privacyBanner]),f.useEffect(()=>{if(i.current.customerPrivacy)return;i.current.customerPrivacy=!0;let c=null,u=window.Shopify||void 0;Object.defineProperty(window,"Shopify",{configurable:!0,get(){return u},set(d){typeof d=="object"&&d!==null&&Object.keys(d).length===0&&(u=d,Object.defineProperty(window.Shopify,"customerPrivacy",{configurable:!0,get(){return c},set(p){if(typeof p=="object"&&p!==null&&"setTrackingConsent"in p){let h=p;c={...h,setTrackingConsent:ne({customerPrivacy:h,config:s})},u={...u,customerPrivacy:c},o.customerPrivacy(),te()}}}))}})},[s,ne,o.customerPrivacy]);let l={customerPrivacy:U()};return t&&(l.privacyBanner=x()),l}var ee=!1;function te(){if(ee)return;ee=!0;let e=new CustomEvent("shopifyCustomerPrivacyApiLoaded");document.dispatchEvent(e)}function ot({withPrivacyBanner:e,onLoaded:t}){let r=f.useRef({customerPrivacy:!1,privacyBanner:!1}),[n,a]=f.useState(e?[!1,!1]:[!1]),i=n.every(Boolean),o={customerPrivacy:()=>{a(e?s=>[!0,s[1]]:()=>[!0])},privacyBanner:()=>{e&&a(s=>[s[0],!0])}};return f.useEffect(()=>{i&&t&&t()},[i,t]),{observing:r,setLoaded:o}}function re(e){if(typeof window>"u")return;let t=window.document.location.host,r=e.split(".").reverse(),n=t.split(".").reverse(),a=[];return r.forEach((i,o)=>{i===n[o]&&a.push(i)}),a.reverse().join(".")}function ne({customerPrivacy:e,config:t}){let r=e.setTrackingConsent,{locale:n,country:a,...i}=t;function o(s,l){r({...i,headlessStorefront:!0,...s},l)}return o}function oe({privacyBanner:e,config:t}){let r=e.loadBanner,n=e.showPreferences;function a(o){if(typeof o=="object"){r({...t,...o});return}r(t)}function i(o){if(typeof o=="object"){n({...t,...o});return}n(t)}return{loadBanner:a,showPreferences:i}}function U(){var e;try{return window.Shopify&&window.Shopify.customerPrivacy?(e=window.Shopify)==null?void 0:e.customerPrivacy:null}catch{return null}}function x(){try{return window&&(window!=null&&window.privacyBanner)?window.privacyBanner:null}catch{return null}}var at="2025.7.0";function it(){let e=U();if(!e)throw new Error("Shopify Customer Privacy API not available. Must be used within a useEffect. Make sure to load the Shopify Customer Privacy API with useCustomerPrivacy() or <AnalyticsProvider>.");return e}function st({consent:e,onReady:t,domain:r}){let{subscribe:n,register:a,canTrack:i}=$(),[o,s]=f.useState(!1),[l,c]=f.useState(!1),u=f.useRef(!1),{checkoutDomain:d,storefrontAccessToken:p,language:h}=e,{ready:y}=a("Internal_Shopify_Analytics");return nt({...e,locale:h,checkoutDomain:d||"mock.shop",storefrontAccessToken:p||"abcdefghijklmnopqrstuvwxyz123456",onVisitorConsentCollected:()=>c(!0),onReady:()=>c(!0)}),Xe({hasUserConsent:l?i():!0,domain:r,checkoutDomain:d}),f.useEffect(()=>{u.current||(u.current=!0,n(E.PAGE_VIEWED,ut),n(E.PRODUCT_VIEWED,lt),n(E.COLLECTION_VIEWED,dt),n(E.SEARCH_VIEWED,ft),n(E.PRODUCT_ADD_TO_CART,pt),s(!0))},[n]),f.useEffect(()=>{o&&l&&(y(),t())},[o,l,t]),null}function R(e){console.error(`[h2:error:ShopifyAnalytics] Unable to send Shopify analytics: Missing shop.${e} configuration.`)}function L(e){var n,a,i,o;let t=it(),r=t.analyticsProcessingAllowed();if(!((n=e==null?void 0:e.shop)!=null&&n.shopId)){R("shopId");return}if(!((a=e==null?void 0:e.shop)!=null&&a.acceptedLanguage)){R("acceptedLanguage");return}if(!((i=e==null?void 0:e.shop)!=null&&i.currency)){R("currency");return}if(!((o=e==null?void 0:e.shop)!=null&&o.hydrogenSubchannelId)){R("hydrogenSubchannelId");return}return{shopifySalesChannel:"hydrogen",assetVersionId:at,...e.shop,hasUserConsent:r,...He(),ccpaEnforced:!t.saleOfDataAllowed(),gdprEnforced:!(t.marketingAllowed()&&t.analyticsProcessingAllowed()),analyticsAllowed:t.analyticsProcessingAllowed(),marketingAllowed:t.marketingAllowed(),saleOfDataAllowed:t.saleOfDataAllowed()}}function ct(e,t){if(t===null)return;let r=L(e);return r?{...r,cartId:t.id}:void 0}var T={};function ut(e){let t=L(e);t&&(D({eventName:v.PAGE_VIEW_2,payload:{...t,...T}}),T={})}function lt(e){let t=L(e);if(t&&_e({type:"product",products:e.products})){let r=M(e.products);T={pageType:k.product,resourceId:r[0].productGid},t={...t,...T,products:M(e.products)},D({eventName:v.PRODUCT_VIEW,payload:t})}}function dt(e){let t=L(e);t&&(T={pageType:k.collection,resourceId:e.collection.id},t={...t,...T,collectionHandle:e.collection.handle,collectionId:e.collection.id},D({eventName:v.COLLECTION_VIEW,payload:t}))}function ft(e){let t=L(e);t&&(T={pageType:k.search},t={...t,...T,searchString:e.searchTerm},D({eventName:v.SEARCH_VIEW,payload:t}))}function pt(e){let{cart:t,currentLine:r}=e,n=ct(e,t);!n||!(r!=null&&r.id)||ht({matchedLine:r,eventPayload:n})}function ht({matchedLine:e,eventPayload:t}){let r={id:e.merchandise.product.id,variantId:e.merchandise.id,title:e.merchandise.product.title,variantTitle:e.merchandise.title,vendor:e.merchandise.product.vendor,price:e.merchandise.price.amount,quantity:e.quantity,productType:e.merchandise.product.productType,sku:e.merchandise.sku};_e({type:"cart",products:[r]})&&D({eventName:v.ADD_TO_CART,payload:{...t,products:M([r])}})}function I(e,t,r,n){if(e==="cart"){let a=`${r?"merchandise":"merchandise.product"}.${t}`;console.error(`[h2:error:ShopifyAnalytics] Can't set up cart analytics events because the \`cart.lines[].${a}\` value is missing from your GraphQL cart query. In your project, search for where \`fragment CartLine on CartLine\` is defined and make sure \`${a}\` is part of your cart query. Check the Hydrogen Skeleton template for reference: https://github.com/Shopify/hydrogen/blob/main/templates/skeleton/app/lib/fragments.ts#L25-L56.`)}else{let a=`${n||t}`;console.error(`[h2:error:ShopifyAnalytics] Can't set up product view analytics events because the \`${a}\` is missing from your \`<Analytics.ProductView>\`. Make sure \`${a}\` is part of your products data prop. Check the Hydrogen Skeleton template for reference: https://github.com/Shopify/hydrogen/blob/main/templates/skeleton/app/routes/products.%24handle.tsx#L159-L165.`)}}function _e({type:e,products:t}){return!t||t.length===0?(I(e,"",!1,"data.products"),!1):(t.forEach(r=>{if(!r.id)return I(e,"id",!1),!1;if(!r.title)return I(e,"title",!1),!1;if(!r.price)return I(e,"price.amount",!0,"price"),!1;if(!r.vendor)return I(e,"vendor",!1),!1;if(!r.variantId)return I(e,"id",!0,"variantId"),!1;if(!r.variantTitle)return I(e,"title",!0,"variantTitle"),!1}),!0)}function M(e){return e.map(t=>{let r={productGid:t.id,variantGid:t.variantId,name:t.title,variantName:t.variantTitle,brand:t.vendor,price:t.price,quantity:t.quantity||1,category:t.productType};return t.sku&&(r.sku=t.sku),t.productType&&(r.category=t.productType),r})}function ae(e){console.error(`[h2:error:CartAnalytics] Can't set up cart analytics events because the \`cart.${e}\` value is missing from your GraphQL cart query. In your project, search for where \`fragment CartApiQuery on Cart\` is defined and make sure \`${e}\` is part of your cart query. Check the Hydrogen Skeleton template for reference: https://github.com/Shopify/hydrogen/blob/main/templates/skeleton/app/lib/fragments.ts#L59.`)}function yt({cart:e,setCarts:t}){let{publish:r,shop:n,customData:a,canTrack:i,cart:o,prevCart:s}=$(),l=f.useRef(null);return f.useEffect(()=>{if(e)return Promise.resolve(e).then(c=>{if(c&&c.lines){if(!c.id){ae("id");return}if(!c.updatedAt){ae("updatedAt");return}}t(({cart:u,prevCart:d})=>(c==null?void 0:c.updatedAt)!==(u==null?void 0:u.updatedAt)?{cart:c,prevCart:u}:{cart:u,prevCart:d})}),()=>{}},[t,e]),f.useEffect(()=>{if(!o||!(o!=null&&o.updatedAt)||(o==null?void 0:o.updatedAt)===(s==null?void 0:s.updatedAt))return;let c;try{c=JSON.parse(localStorage.getItem("cartLastUpdatedAt")||"")}catch{c=null}if(o.id===(c==null?void 0:c.id)&&o.updatedAt===(c==null?void 0:c.updatedAt))return;let u={eventTimestamp:Date.now(),cart:o,prevCart:s,shop:n,customData:a};if(o.updatedAt===l.current)return;l.current=o.updatedAt,r("cart_updated",u),localStorage.setItem("cartLastUpdatedAt",JSON.stringify({id:o.id,updatedAt:o.updatedAt}));let d=s!=null&&s.lines?Y(s==null?void 0:s.lines):[],p=o.lines?Y(o.lines):[];d==null||d.forEach(h=>{let y=p.filter(_=>h.id===_.id);if((y==null?void 0:y.length)===1){let _=y[0];h.quantity<_.quantity?r("product_added_to_cart",{...u,prevLine:h,currentLine:_}):h.quantity>_.quantity&&r("product_removed_from_cart",{...u,prevLine:h,currentLine:_})}else r("product_removed_from_cart",{...u,prevLine:h})}),p==null||p.forEach(h=>{let y=d.filter(_=>h.id===_.id);(!y||y.length===0)&&r("product_added_to_cart",{...u,currentLine:h})})},[o,s,r,n,a,i]),null}var mt="https://cdn.shopify.com/shopifycloud/perf-kit/shopify-perf-kit-spa.min.js";function vt({shop:e}){let t=f.useRef(!1),{subscribe:r,register:n}=$(),{ready:a}=n("Internal_Shopify_Perf_Kit"),i=K(mt,{attributes:{id:"perfkit","data-application":"hydrogen","data-shop-id":m(e.shopId).id.toString(),"data-storefront-id":e.hydrogenSubchannelId,"data-monorail-region":"global","data-spa-mode":"true","data-resource-timing-sampling-rate":"100"}});return f.useEffect(()=>{i!=="done"||t.current||(t.current=!0,r(E.PAGE_VIEWED,()=>{var o;(o=window.PerfKit)==null||o.navigate()}),r(E.PRODUCT_VIEWED,()=>{var o;(o=window.PerfKit)==null||o.setPageType("product")}),r(E.COLLECTION_VIEWED,()=>{var o;(o=window.PerfKit)==null||o.setPageType("collection")}),r(E.SEARCH_VIEWED,()=>{var o;(o=window.PerfKit)==null||o.setPageType("search")}),r(E.CART_VIEWED,()=>{var o;(o=window.PerfKit)==null||o.setPageType("cart")}),a())},[r,a,i]),null}var ie=new Set,gt=e=>{ie.has(e)||(console.warn(e),ie.add(e))},se=new Set,ce=e=>{se.has(e)||(console.error(new Error(e)),se.add(e))},_t={canTrack:()=>!1,cart:null,customData:{},prevCart:null,publish:()=>{},shop:null,subscribe:()=>{},register:()=>({ready:()=>{}}),customerPrivacy:null,privacyBanner:null},Ee=f.createContext(_t),W=new Map,S={};function we(){return Object.values(S).every(Boolean)}function ue(e,t){var r;W.has(e)||W.set(e,new Map),(r=W.get(e))==null||r.set(t.toString(),t)}var j=new Map;function le(e,t){if(!we()){j.set(e,t);return}Pe(e,t)}function Pe(e,t){(W.get(e)??new Map).forEach((r,n)=>{try{r(t)}catch(a){typeof a=="object"&&a instanceof Error?console.error("Analytics publish error",a.message,n,a.stack):console.error("Analytics publish error",a,n)}})}function de(e){return S.hasOwnProperty(e)||(S[e]=!1),{ready:()=>{S[e]=!0,we()&&j.size>0&&(j.forEach((t,r)=>{Pe(r,t)}),j.clear())}}}function fe(){try{return window.Shopify.customerPrivacy.analyticsProcessingAllowed()}catch{}return!1}function pe(e,t){return`[h2:error:Analytics.Provider] - ${e} is required. Make sure ${t} is defined in your environment variables. See https://h2o.fyi/analytics/consent to learn how to setup environment variables in the Shopify admin.`}function Et({canTrack:e,cart:t,children:r,consent:n,customData:a={},shop:i=null,cookieDomain:o}){var F;let s=f.useRef(!1),{shop:l}=wt(i),[c,u]=f.useState(!!e),[d,p]=f.useState({cart:null,prevCart:null}),[h,y]=f.useState(e?()=>e:()=>fe);if(l)if(/\/68817551382$/.test(l.shopId))gt("[h2:error:Analytics.Provider] - Mock shop is used. Analytics will not work properly.");else{if(!n.checkoutDomain){let q=pe("consent.checkoutDomain","PUBLIC_CHECKOUT_DOMAIN");ce(q)}if(!n.storefrontAccessToken){let q=pe("consent.storefrontAccessToken","PUBLIC_STOREFRONT_API_TOKEN");ce(q)}n!=null&&n.country||(n.country="US"),n!=null&&n.language||(n.language="EN"),n.withPrivacyBanner===void 0&&(n.withPrivacyBanner=!1)}let _=f.useMemo(()=>({canTrack:h,...d,customData:a,publish:h()?le:()=>{},shop:l,subscribe:ue,register:de,customerPrivacy:U(),privacyBanner:x()}),[c,h,d,(F=d.cart)==null?void 0:F.updatedAt,d.prevCart,le,ue,a,l,de,JSON.stringify(S),U,x]);return C.jsxs(Ee.Provider,{value:_,children:[r,!!l&&C.jsx(et,{}),!!l&&!!t&&C.jsx(yt,{cart:t,setCarts:p}),!!l&&n.checkoutDomain&&C.jsx(st,{consent:n,onReady:()=>{s.current=!0,u(!0),y(e?()=>e:()=>fe)},domain:o}),!!l&&C.jsx(vt,{shop:l})]})}function $(){let e=f.useContext(Ee);if(!e)throw new Error("[h2:error:useAnalytics] 'useAnalytics()' must be a descendent of <AnalyticsProvider/>");return e}function wt(e){let[t,r]=f.useState(null);return f.useEffect(()=>(Promise.resolve(e).then(r),()=>{}),[r,e]),{shop:t}}var kt={Provider:Et},Ae=f.createContext(void 0),St=Ae.Provider,Pt=()=>f.useContext(Ae);f.forwardRef((e,t)=>{let{waitForHydration:r,src:n,...a}=e,i=Pt();return r?C.jsx(At,{src:n,options:a}):C.jsx("script",{suppressHydrationWarning:!0,...a,src:n,nonce:i,ref:t})});function At({src:e,options:t}){if(!e)throw new Error("`waitForHydration` with the Script component requires a `src` prop");return K(e,{attributes:t}),null}f.lazy(()=>Se(()=>import("./log-seo-tags-TY72EQWZ-DCHH-_Gl.js"),[]));export{Pt as W,St as l,kt as y};
