import{a as r,p as $,C as R,w as k,B}from"./chunk-TMI4QPZX-ByyJG4wn.js";import{j as s}from"./jsx-runtime-C2tkE_r8.js";import{a as L}from"./index-CLcShtRP.js";import{a as M,u as D}from"./user.types-DWOeYgbg.js";import{E as I}from"./email-form.component-BRL09Lj5.js";import{a as A}from"./index-CNQaDl8h.js";import{I as U}from"./iconBase-BrRXCXs8.js";import{P as H}from"./product-preview.component-rRI0ifAa.js";import{u as G}from"./use-is-mobile-PX0pwSNg.js";import"./index-B9ygI19o.js";const z="_dropPageContainer_l2oan_1",Y="_productsSection_l2oan_26",V="_productsWrapper_l2oan_33",q="_categoryHeader_l2oan_36",J="_categoryDescription_l2oan_41",K="_filterTabsWrapper_l2oan_50",Q="_filterTabs_l2oan_50",X="_hasOverflow_l2oan_71",Z="_scrolledToEnd_l2oan_71",ee="_filterButton_l2oan_82",se="_active_l2oan_114",te="_productsContainer_l2oan_119",oe="_noProducts_l2oan_127",re="_lockedDropContainer_l2oan_134",ne="_mobileFilterButton_l2oan_208",o={dropPageContainer:z,productsSection:Y,productsWrapper:V,categoryHeader:q,categoryDescription:J,filterTabsWrapper:K,filterTabs:Q,hasOverflow:X,scrolledToEnd:Z,filterButton:ee,active:se,productsContainer:te,noProducts:oe,lockedDropContainer:re,mobileFilterButton:ne},ae="_PasswordWallContainer_182i8_1",ie="_imageContainer_182i8_12",ce="_emptySlot_182i8_25",le="_emailFormContainerPW_182i8_29",de="_emailFormContainerPWInner_182i8_34",me="_errorMessage_182i8_78",h={PasswordWallContainer:ae,imageContainer:ie,emptySlot:ce,emailFormContainerPW:le,emailFormContainerPWInner:de,errorMessage:me},ue=c=>({type:M.SET_PASSWORD_GUESSED,payload:c}),he="_formContainer_yi6j8_1",pe="_submitButton_yi6j8_7",F={formContainer:he,submitButton:pe},fe=({handleSubmit:c,placeholder:n,value:d,setValue:a})=>s.jsxs("div",{className:F.formContainer,children:[s.jsx("input",{type:"text",placeholder:n??"Subscribe",value:d,onChange:m=>a(m.target.value)}),s.jsx("div",{className:F.submitButton,onClick:c,children:s.jsx(U.Provider,{value:{className:"arrow-right-email"},children:s.jsx(A,{})})})]}),_e=({images:c,password:n})=>{const[d,a]=r.useState(""),[m,u]=r.useState(""),[T,p]=r.useState(0),i=r.useRef(null),S=L();r.useEffect(()=>{const l=window.innerWidth<=768?4:8,w=c.length%l,_=w===0?0:l-w;p(_)},[c.length]);const b=f=>{d===n?S(ue(d)):(u("Incorrect password"),setTimeout(()=>{u("")},2e3))};return s.jsxs("div",{className:h.PasswordWallContainer,children:[s.jsx("div",{className:h.emailFormContainerPW,children:s.jsxs("div",{className:h.emailFormContainerPWInner,children:[s.jsx("p",{children:"Join our email list for exclusive discounts and early access codes."}),s.jsx(I,{isSidebar:!1,placeholder:"enter email"})]})}),s.jsxs("div",{className:h.imageContainer,ref:i,children:[c.map((f,l)=>s.jsx("img",{src:f,alt:`product preview images ${l}`},l)),Array.from({length:T},(f,l)=>s.jsx("div",{className:h.emptySlot},`empty-${l}`))]}),s.jsx("div",{className:h.emailFormContainerPW,children:s.jsxs("div",{className:h.emailFormContainerPWInner,children:[s.jsx("p",{children:"Enter password to continue to drop:"}),s.jsx(fe,{placeholder:"Enter password",handleSubmit:b,value:d,setValue:a}),s.jsx("p",{className:h.errorMessage,children:m})]})})]})},ge={"T-Shirts":"tshirt","Organic Cotton Hoodies":"hoodie","Organic Cotton Crews":"crewneck"},C={all:"Shop All",drop:"Drop",mainline:"Main Line",tshirt:"T-Shirt",hoodie:"Hoodie",crewneck:"Crewneck"},ve={all:"Skip the sorting - just plunge in. This is every piece we've reeled in at Semi Aquatics, all in one place.",drop:"Ride the latest wave - our limited collection, exclusive to this release and gone once it drifts away.",mainline:"Catch our core classics - timeless pieces that surface again and again whenever they swim off the shelf.",tshirt:"Relaxed fit tees with a slight crop, cut from sturdy-soft organic cotton.",hoodie:"Relaxed-fit hoodies constructed from heavyweight 500gsm organic cotton fleece.",crewneck:"Relaxed-fit crewnecks constructed from heavyweight 500gsm organic cotton fleece."},Pe=({dropItems:c,mainLineItems:n,password:d,dropData:a})=>{const m=G(),u=$(),T=R(),{products:p}=c,[i,S]=r.useState(()=>{const t=new URLSearchParams(u.search).get("tab");return Object.keys(C).includes(t)?t:"all"}),[b,f]=r.useState(!1),[l,w]=r.useState(!1),_=r.useRef(null),O=e=>{S(e);const t=new URLSearchParams(u.search);t.set("tab",e),T(`${u.pathname}?${t.toString()}`,{replace:!1})};r.useMemo(()=>(a==null?void 0:a.title)||"Latest Drop",[a]);const{isDropLocked:y}=D({password:d,dropDateTime:(a==null?void 0:a.dateTime)??null}),v=r.useMemo(()=>{var j;const e=(p==null?void 0:p.edges)||[],t=((j=n==null?void 0:n.products)==null?void 0:j.edges)||[],g=e.map(P=>({...P,source:"drop"})),N=t.map(P=>({...P,source:"mainline"}));return[...g,...N]},[p,n]),E=r.useMemo(()=>v.length===0?[]:v.filter(e=>i==="all"?!0:i==="drop"?e.source==="drop":i==="mainline"?e.source==="mainline":ge[e.node.productType]===i),[v,i]),x=()=>{const e=_.current;if(e){const t=e.scrollWidth>e.clientWidth;f(t)}},W=()=>{const e=_.current;if(e){const t=e.scrollLeft,g=e.clientWidth,N=e.scrollWidth,j=m?5:1,P=t+g>=N-j;w(P)}};return r.useEffect(()=>{const e=setTimeout(()=>{x()},100);return window.addEventListener("resize",x),()=>{clearTimeout(e),window.removeEventListener("resize",x)}},[E]),r.useEffect(()=>{const e=_.current;if(e)return e.addEventListener("scroll",W),setTimeout(()=>{W()},1e3),()=>{e.removeEventListener("scroll",W)}},[]),r.useEffect(()=>{x()},[i,v.length]),r.useEffect(()=>{const t=new URLSearchParams(u.search).get("tab");t&&Object.keys(C).includes(t)&&S(t)},[u.search]),s.jsxs("div",{className:`${o.dropPageContainer} ${y?o.lockedDropContainer:""}`,children:[y&&s.jsx(_e,{images:v.map(e=>e.node.images.edges[2].node.transformedSrc),password:d}),!y&&s.jsxs("div",{className:o.productsSection,children:[s.jsx("div",{className:`${o.filterTabsWrapper} ${b?o.hasOverflow:""} ${l?o.scrolledToEnd:""}`,children:s.jsx("div",{className:o.filterTabs,ref:_,children:Object.entries(C).map(([e,t],g)=>m?s.jsx("button",{className:`${o.filterButton} ${o.mobileFilterButton} ${i===e?o.active:""}`,onClick:()=>O(e),"data-text":t,children:`${t}${!m&&g!==Object.entries(C).length-1?",":""}`},e):s.jsx("button",{className:`${o.filterButton} ${i===e?o.active:""}`,onClick:()=>O(e),"data-text":t,children:`${t}${!m&&g!==Object.entries(C).length-1?",":""}`},e))})}),s.jsx("div",{className:o.categoryHeader,children:s.jsx("p",{className:o.categoryDescription,children:ve[i]})}),s.jsx("div",{className:o.productsWrapper,children:s.jsx("div",{className:o.productsContainer,children:E.length>0?E.map(e=>s.jsx(H,{image:e.node.images.edges[1]?e.node.images.edges[1].node.transformedSrc:"",secondaryImage:e.node.images.edges[2]?e.node.images.edges[2].node.transformedSrc:void 0,title:e.node.title,isSoldOut:!e.node.availableForSale,price:e.node.variants.edges[0]?e.node.variants.edges[0].node.priceV2.amount:"",id:e.node.id,handle:e.node.handle,isArchive:!1},e.node.id)):s.jsx("div",{className:o.noProducts,children:"No products found"})})})]})]})},Ne=k(function(){const n=B();return s.jsx(Pe,{dropItems:n.dropItems,mainLineItems:n.mainLineItems,password:n.password,dropData:n.dropData})});export{Ne as default};
