import{a as o,p as k,C as F,w as L,B as M}from"./chunk-TMI4QPZX-ByyJG4wn.js";import{j as s}from"./jsx-runtime-C2tkE_r8.js";import{a as B}from"./index-CLcShtRP.js";import{a as D,u as I}from"./user.types-DWOeYgbg.js";import{E as _}from"./email-form.component-D8cn0SvE.js";import{a as A}from"./index-CNQaDl8h.js";import{I as U}from"./iconBase-BrRXCXs8.js";import{P as H}from"./product-preview.component-CGnctVRA.js";import{u as G}from"./use-is-mobile-T0pw4rL4.js";import"./index-B9ygI19o.js";const z=c=>({type:D.SET_PASSWORD_GUESSED,payload:c}),R={formContainer:"formContainer",submitButton:"submitButton"},Y=({handleSubmit:c,placeholder:n,value:d,setValue:a})=>s.jsxs("div",{className:R.formContainer,children:[s.jsx("input",{type:"text",placeholder:n??"Subscribe",value:d,onChange:m=>a(m.target.value)}),s.jsx("div",{className:R.submitButton,onClick:c,children:s.jsx(U.Provider,{value:{className:"arrow-right-email"},children:s.jsx(A,{})})})]}),h={PasswordWallContainer:"PasswordWallContainer",imageContainer:"imageContainer",emptySlot:"emptySlot",emailFormContainerPW:"emailFormContainerPW",emailFormContainerPWInner:"emailFormContainerPWInner",errorMessage:"errorMessage"},V=({images:c,password:n})=>{const[d,a]=o.useState(""),[m,u]=o.useState(""),[E,p]=o.useState(0),i=o.useRef(null),x=B();o.useEffect(()=>{const l=window.innerWidth<=768?4:8,C=c.length%l,g=C===0?0:l-C;p(g)},[c.length]);const b=f=>{d===n?x(z(d)):(u("Incorrect password"),setTimeout(()=>{u("")},2e3))};return s.jsxs("div",{className:h.PasswordWallContainer,children:[s.jsx("div",{className:h.emailFormContainerPW,children:s.jsxs("div",{className:h.emailFormContainerPWInner,children:[s.jsx("p",{children:"Join our email list for exclusive discounts and early access codes."}),s.jsx(_,{isSidebar:!1,placeholder:"enter email"})]})}),s.jsxs("div",{className:h.imageContainer,ref:i,children:[c.map((f,l)=>s.jsx("img",{src:f,alt:`product preview images ${l}`},l)),Array.from({length:E},(f,l)=>s.jsx("div",{className:h.emptySlot},`empty-${l}`))]}),s.jsx("div",{className:h.emailFormContainerPW,children:s.jsxs("div",{className:h.emailFormContainerPWInner,children:[s.jsx("p",{children:"Enter password to continue to drop:"}),s.jsx(Y,{placeholder:"Enter password",handleSubmit:b,value:d,setValue:a}),s.jsx("p",{className:h.errorMessage,children:m})]})})]})},r={dropPageContainer:"dropPageContainer",productsSection:"productsSection",productsWrapper:"productsWrapper",categoryHeader:"categoryHeader",categoryDescription:"categoryDescription",filterTabsWrapper:"filterTabsWrapper",hasOverflow:"hasOverflow",scrolledToEnd:"scrolledToEnd",filterTabs:"filterTabs",filterButton:"filterButton",mobileFilterButton:"mobileFilterButton",active:"active",productsContainer:"productsContainer",noProducts:"noProducts",lockedDropContainer:"lockedDropContainer"},q={"T-Shirts":"tshirt","Organic Cotton Hoodies":"hoodie","Organic Cotton Crews":"crewneck"},w={all:"Shop All",drop:"Drop",mainline:"Main Line",tshirt:"T-Shirt",hoodie:"Hoodie",crewneck:"Crewneck"},J={all:"Skip the sorting - just plunge in. This is every piece we've reeled in at Semi Aquatics, all in one place.",drop:"Ride the latest wave - our limited collection, exclusive to this release and gone once it drifts away.",mainline:"Catch our core classics - timeless pieces that surface again and again whenever they swim off the shelf.",tshirt:"Relaxed fit tees with a slight crop, cut from sturdy-soft organic cotton.",hoodie:"Relaxed-fit hoodies constructed from heavyweight 500gsm organic cotton fleece.",crewneck:"Relaxed-fit crewnecks constructed from heavyweight 500gsm organic cotton fleece."},K=({dropItems:c,mainLineItems:n,password:d,dropData:a})=>{const m=G(),u=k(),E=F(),{products:p}=c,[i,x]=o.useState(()=>{const t=new URLSearchParams(u.search).get("tab");return Object.keys(w).includes(t)?t:"all"}),[b,f]=o.useState(!1),[l,C]=o.useState(!1),g=o.useRef(null),$=e=>{x(e);const t=new URLSearchParams(u.search);t.set("tab",e),E(`${u.pathname}?${t.toString()}`,{replace:!1})};o.useMemo(()=>(a==null?void 0:a.title)||"Latest Drop",[a]);const{isDropLocked:y}=I({password:d,dropDateTime:(a==null?void 0:a.dateTime)??null}),P=o.useMemo(()=>{var T;const e=(p==null?void 0:p.edges)||[],t=((T=n==null?void 0:n.products)==null?void 0:T.edges)||[],v=e.map(S=>({...S,source:"drop"})),O=t.map(S=>({...S,source:"mainline"}));return[...v,...O]},[p,n]),W=o.useMemo(()=>P.length===0?[]:P.filter(e=>i==="all"?!0:i==="drop"?e.source==="drop":i==="mainline"?e.source==="mainline":q[e.node.productType]===i),[P,i]),j=()=>{const e=g.current;if(e){const t=e.scrollWidth>e.clientWidth;f(t)}},N=()=>{const e=g.current;if(e){const t=e.scrollLeft,v=e.clientWidth,O=e.scrollWidth,T=m?5:1,S=t+v>=O-T;C(S)}};return o.useEffect(()=>{const e=setTimeout(()=>{j()},100);return window.addEventListener("resize",j),()=>{clearTimeout(e),window.removeEventListener("resize",j)}},[W]),o.useEffect(()=>{const e=g.current;if(e)return e.addEventListener("scroll",N),setTimeout(()=>{N()},1e3),()=>{e.removeEventListener("scroll",N)}},[]),o.useEffect(()=>{j()},[i,P.length]),o.useEffect(()=>{const t=new URLSearchParams(u.search).get("tab");t&&Object.keys(w).includes(t)&&x(t)},[u.search]),s.jsxs("div",{className:`${r.dropPageContainer} ${y?r.lockedDropContainer:""}`,children:[y&&s.jsx(V,{images:P.map(e=>e.node.images.edges[2].node.transformedSrc),password:d}),!y&&s.jsxs("div",{className:r.productsSection,children:[s.jsx("div",{className:`${r.filterTabsWrapper} ${b?r.hasOverflow:""} ${l?r.scrolledToEnd:""}`,children:s.jsx("div",{className:r.filterTabs,ref:g,children:Object.entries(w).map(([e,t],v)=>m?s.jsx("button",{className:`${r.filterButton} ${r.mobileFilterButton} ${i===e?r.active:""}`,onClick:()=>$(e),"data-text":t,children:`${t}${!m&&v!==Object.entries(w).length-1?",":""}`},e):s.jsx("button",{className:`${r.filterButton} ${i===e?r.active:""}`,onClick:()=>$(e),"data-text":t,children:`${t}${!m&&v!==Object.entries(w).length-1?",":""}`},e))})}),s.jsx("div",{className:r.categoryHeader,children:s.jsx("p",{className:r.categoryDescription,children:J[i]})}),s.jsx("div",{className:r.productsWrapper,children:s.jsx("div",{className:r.productsContainer,children:W.length>0?W.map(e=>s.jsx(H,{image:e.node.images.edges[1]?e.node.images.edges[1].node.transformedSrc:"",secondaryImage:e.node.images.edges[2]?e.node.images.edges[2].node.transformedSrc:void 0,title:e.node.title,isSoldOut:!e.node.availableForSale,price:e.node.variants.edges[0]?e.node.variants.edges[0].node.priceV2.amount:"",id:e.node.id,handle:e.node.handle,isArchive:!1},e.node.id)):s.jsx("div",{className:r.noProducts,children:"No products found"})})})]})]})},ie=L(function(){const n=M();return s.jsx(K,{dropItems:n.dropItems,mainLineItems:n.mainLineItems,password:n.password,dropData:n.dropData})});export{ie as default};
