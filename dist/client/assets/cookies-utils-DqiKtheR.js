function l(r){if(!r){const n=`flattenConnection(): needs a 'connection' to flatten, but received '${r??""}' instead.`;return console.error(n+" Returning an empty array"),[]}return"nodes"in r?r.nodes:"edges"in r&&Array.isArray(r.edges)?r.edges.map(n=>{if(!(n!=null&&n.node))throw new Error("flattenConnection(): Connection edges must contain nodes");return n.node}):[]}const S="shopifyCartId",g="Shopify-Storefront-Id",h="Shopify-Storefront-Y",y="Shopify-Storefront-S",x="_shopify_y",u="_shopify_s";var p=new Set(["domain","path","max-age","expires","samesite","secure","httponly"]);function f(r){let n={},t,e,s=0,i=r.split(/;\s*/g),a,o;for(;s<i.length;s++)if(e=i[s],t=e.indexOf("="),~t){if(a=e.substring(0,t++).trim(),o=e.substring(t).trim(),o[0]==='"'&&(o=o.substring(1,o.length-1)),~o.indexOf("%"))try{o=decodeURIComponent(o)}catch{}p.has(e=a.toLowerCase())?e==="expires"?n.expires=new Date(o):e==="max-age"?n.maxage=+o:n[e]=o:n[a]=o}else(a=e.trim().toLowerCase())&&(a==="httponly"||a==="secure")&&(n[a]=!0);return n}function _(r,n,t={}){let e=r+"="+encodeURIComponent(n);return t.expires&&(e+="; Expires="+new Date(t.expires).toUTCString()),t.maxage!=null&&t.maxage>=0&&(e+="; Max-Age="+(t.maxage|0)),t.domain&&(e+="; Domain="+t.domain),t.path&&(e+="; Path="+t.path),t.samesite&&(e+="; SameSite="+t.samesite),(t.secure||t.samesite==="None")&&(e+="; Secure"),t.httponly&&(e+="; HttpOnly"),e}const c="xxxx-4xxx-xxxx-xxxxxxxxxxxx";function C(){let r="";try{const n=window.crypto,t=new Uint16Array(31);n.getRandomValues(t);let e=0;r=c.replace(/[x]/g,s=>{const i=t[e]%16,a=s==="x"?i:i&3|8;return e++,a.toString(16)}).toUpperCase()}catch{r=c.replace(/[x]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}).toUpperCase()}return`${m()}-${r}`}function m(){let r=0,n=0;r=new Date().getTime()>>>0;try{n=performance.now()>>>0}catch{n=0}return Math.abs(r+n).toString(16).toLowerCase().padStart(8,"0")}function O(r){const n=f(r);return{[x]:n[x]||"",[u]:n[u]||""}}export{S as C,u as S,x as a,C as b,g as c,h as d,y as e,l as f,O as g,_ as l};
